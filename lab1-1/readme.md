# НИЯУ МИФИ. ИИКС. Лабораторная работа №1-1. «Построение модели данных». Ступпнков Иван Б20-505. 2023.
## Обзор предметной области

Рассматриваемая предметная область - Школа. Есть расписание, ученики, их родители и учителя

## Диаграмма сущностей


## Спецификация таблиц

### schedule

| Название Поля | Тип | Описание | Первичный ключ? | Внешний ключ? |
| --- | --- | --- | --- | --- |
| schedule_id | int | Идентификатор | да | нет |
| group_id | int | Индентификатор группы | нет | да |
| subject_id | int | Индентификатор предмета | нет | да |
| teacher_id | int | Индентификатор учителя | нет | да |
| schedule_date | string | дата занятия | нет | нет |

### ItemComments

| Название Поля | Тип | Описание | Первичный ключ? | Внешний ключ? |
| --- | --- | --- | --- | --- |
| id | int | Идентификатор | да | нет |
| item_id | int | Идентификатор товара | нет | Item.id |
| username | string | Имя пользователя | нет | нет |
| user_phone | string | Телефон пользователя | нет | нет |
| comment_body | text | Текст комментария | нет | нет |

### ItemPhoto

| Название Поля | Тип | Описание | Первичный ключ? | Внешний ключ? |
| --- | --- | --- | --- | --- |
| item_id | int | Идентификатор товара | да | Item.id |
| photo_link | string | Ссылка на фотографию | да | нет |

### ItemTagsLink

| Название Поля | Тип | Описание | Первичный ключ? | Внешний ключ? |
| --- | --- | --- | --- | --- |
| item_id | int | Идентификатор товара | да | Item.id |
| tag_id | int | Идентификатор тега | да | Tags.id |

### Tags

| Название Поля | Тип | Описание | Первичный ключ? | Внешний ключ? |
| --- | --- | --- | --- | --- |
| id | int | Идентификатор тега | да | нет |
| name | string | Название тега | нет | нет |
| description | text | Описание тега | нет | нет |

### ItemShop

| Название Поля | Тип | Описание | Первичный ключ? | Внешний ключ? |
| --- | --- | --- | --- | --- |
| id | int | Идентификатор | да | нет |
| item_id | int | Идентификатор товара | да | Item.id |
| name | string | Название магазина | нет | нет |
| link_to_shop | string | Ссылка на товар в магазине | нет | нет |
| trusted | bool | Можно ли доверять продавцу? | нет | нет |
| current_price | int | Текущая цена продажи | нет | нет |

### Storage

| Название Поля | Тип | Описание | Первичный ключ? | Внешний ключ? |
| --- | --- | --- | --- | --- |
| id | int | Идентификатор | да | нет |
| item_id | int | Идентификатор товара | да | Item.id |
| storage_name | string | Название склада | нет | нет |
| item_amount | int | Количество товара на складе| нет | нет |


### Orders

| Название Поля | Тип | Описание | Первичный ключ? | Внешний ключ? |
| --- | --- | --- | --- | --- |
| id | int | Идентификатор | да | нет |
| item_id | int | Идентификатор товара | да | Item.id |
| item_amount | int | Количество товара в заказе | нет | нет |
| item_sell_price | int | Цена продажи | нет | нет |
| username | string | Имя пользователя | нет | нет |
| delivery_location | string | Адрес доставки | нет | нет |
| is_delivered | bool | Уже доставлено? | нет | нет |
| delivery_date | string | Ожидаемая дата доставки | нет | нет |
| delivery_note | text | Пожелания к доставке | нет | нет |
| delivery_comment | text | Отзыв к доставке | нет | нет |

## Приложение
[SQL сценарий для создания таблиц в SQLite](./db.sql)

## Доказательство 3 нормальной формы

### Первая нормальная форма

Первая нормальная форма требует, чтобы в каждой ячейке таблицы было только одно значение, каждый столбец был уникальным, и все записи были уникальными. Все таблицы удовлетворяют этим условиям. У каждого столбца есть уникальное имя, а первичный ключ гарантирует уникальность каждой строки. Каждый столбец содержит только одно значение.

### Вторая нормальная форма

Вторая нормальная форма требует, чтобы таблица была в 1NF и все столбцы, не являющиеся ключевыми, были полностью функционально зависимы от первичного ключа. Это означает, что вся информация в строке должна быть связана с ключом. В таблицах все не ключевые столбцы (например, name, schedule_date) полностью функционально зависят от первичного ключа.

### Третья нормальная форма

Третья нормальная форма требует, чтобы таблица была в 2NF и в ней не было транзитивных функциональных зависимостей. Транзитивная функциональная зависимость — это когда один атрибут функционально зависит от другого атрибута, который, в свою очередь, функционально зависит от первичного ключа. В таблицах таких зависимостей нет.

Рассмотрим таблицу Students:

student_id — первичный ключ, каждый студент имеет уникальный ID.
name — имя студента, полностью зависит от student_id.
group_id — ID группы, к которой относится студент, тоже полностью зависит от student_id.
Аналогично можно проанализировать остальные таблицы. Нет полей, которые бы зависели от других не ключевых полей, что бы создало транзитивную зависимость. Итак, все таблицы соответствуют третьей нормальной форме.

## Заключение
Была смоделирована структура базы данных для расписания школы. Были описаны сущности, их атрибуты и связи между ними. Была построена диаграмма сущностей. Было доказано, что база данных находится в третьей нормальной форме. 
